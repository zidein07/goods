var GoodsApp=angular.module("goodsApp",["ui.router","pascalprecht.translate"]);GoodsApp.controller("AboutCtrl",["$scope","GoodsApiService",function(t,e){}]),GoodsApp.controller("GoodsCtrl",["$scope","GoodsApiService",function(t,e){t.goods=[],t.loremTpl="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt distinctio dolorem dolorum eius harum in minus non nostrum pariatur, perspiciatis porro quasi, quos repellendus saepe tempore tenetur totam velit vitae?",e.getGoods().then(function(e){if(e.hasNotResults())return!1;t.goods=e.getResults()})}]),GoodsApp.controller("HeaderCtrl",["$scope","$translate",function(t,e){t.languages=[{val:"ru",lang:"Русский"},{val:"en",lang:"English"}],t.currentLang=function(){var t=localStorage.getItem("lang");return t||"ru"}(),t.setCurrentLang=function(t,r){e.use(t),r||localStorage.setItem("lang",t)},t.setCurrentLang(t.currentLang,!0)}]),GoodsApp.config(["$stateProvider","$locationProvider",function(t,e){function r(t){return"tpl/"+t+".html"}t.state("main",{url:"/",controller:"GoodsCtrl",templateUrl:r("goods")}).state("about",{url:"/about",controller:"AboutCtrl",templateUrl:r("about")}),e.hashPrefix(""),e.html5Mode({enabled:!0,requireBase:!1})}]),GoodsApp.config(["$translateProvider",function(t){t.translations("en",{PARSER_TITLE:"Wall parsing in",SHIPS:"Spaceships",ABOUT:"About"}).translations("ru",{PARSER_TITLE:"Парсинг стены",SHIPS:"Космические корабли",ABOUT:"О Проекте"}).registerAvailableLanguageKeys(["en","ru"],{"en_*":"en","ru_*":"ru","*":"ru"}).preferredLanguage("ru")}]),GoodsApp.filter("trustHtml",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]),GoodsApp.directive("headerDirective",[function(){return{restrict:"E",replace:!0,templateUrl:"tpl/header.html",controller:"HeaderCtrl",scope:{props:"="}}}]),GoodsApp.factory("GoodsApiService",["$http","GoodsApiResponseService",function(t,e){function r(t){return e(t.data)}return{buildLink:function(t){return"/"+t},getGoods:function(e){return t({url:"http://swapi.co/api/starships/",method:"GET",params:e}).then(r)}}}]),GoodsApp.service("GoodsApiResponseService",function(){var t=function(t){this.response=t,this.errorStatus=!1,this.errorType=null,this.errorCode=null,this.errorMessage=null};return t.prototype.getResults=function(){return this.response.results},t.prototype.hasResults=function(){return!_.isEmpty(this.response.results)},t.prototype.hasNotResults=function(){return _.isEmpty(this.response.results)},t.prototype.getNextLink=function(){return this.response.next},t.prototype.getPrevLink=function(){return this.response.next},t.prototype.getCount=function(){return this.response.count},function(e){return new t(e)}});